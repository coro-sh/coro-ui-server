import"../chunks/DsnmJJEf.js";import{o as Je}from"../chunks/DGHSwugD.js";import{p as Oe,a as ze,i as Be,c,b as f,g as e,d as I,s as l,n as se,r as o,m as Ke,f as a,e as Qe,u as de,$ as Ue,t as ae}from"../chunks/BbLl-hmz.js";import{s as ce}from"../chunks/DTULLxbT.js";import{p as ye,i as R}from"../chunks/CR32N0-5.js";import{s as Me,e as Pe,i as Ve,L as We}from"../chunks/DdZiSI1B.js";import{f as n,t as ke,a as t,c as B}from"../chunks/BGV7lBZC.js";import{c as P}from"../chunks/DU2gS9WV.js";import{h as Xe}from"../chunks/DhNQZhGX.js";import{g as Ye,d as Ze}from"../chunks/CxOjX-KX.js";import{B as ve}from"../chunks/DpPW9MOW.js";import{C as fe,a as me}from"../chunks/CfNa-t2s.js";import{B as et}from"../chunks/BXD1d4a_.js";import{B as tt,a as at,b as rt,H as st,c as ot,S as re,C as nt}from"../chunks/SAkFzdjK.js";import{M as lt}from"../chunks/DmDi5UQw.js";import{E as it}from"../chunks/CqQZYr2X.js";import{n as we}from"../chunks/Cmrg4eaL.js";import{C as Se}from"../chunks/nMQjHOAs.js";import{p as dt}from"../chunks/CD-YXIRN.js";import{E as ct,L as vt,I as ft}from"../chunks/D6TB6_0Q.js";import{P as Ce}from"../chunks/DwDu8j_9.js";import{F as mt}from"../chunks/B0cW14jS.js";var ut=n('<div class="col-span-2"><!> <!></div>');function pt(oe,J){Oe(J,!0);let p=ye(J,"open",15,!1),K=ye(J,"operators",31,()=>Be([])),M=I(!1),i=I("");const Y=new Se;async function Z(_){_.preventDefault();try{f(M,!0);const T=await Y.createOperator(e(i));K([T,...K()]),f(i,""),p(!1)}catch(T){Me(T)}finally{f(M,!1)}}ct(oe,{entityType:"operator",modalType:"create",onsubmit:Z,get open(){return p()},set open(_){p(_)},get loading(){return e(M)},set loading(_){f(M,_,!0)},children:(_,T)=>{var k=ut(),F=c(k);vt(F,{for:"name",class:"mb-2",children:(q,ne)=>{se();var Q=ke("Name");t(q,Q)},$$slots:{default:!0}});var ee=l(F,2);ft(ee,{name:"name",placeholder:"Type operator name",required:!0,get value(){return e(i)},set value(q){f(i,q,!0)}}),o(k),t(_,k)},$$slots:{default:!0}}),ze()}var _t=n("<!> Operators",1),gt=n("<!> Create Operator",1),$t=n("<!> Create Operator",1),ht=n('<div class="mb-3 flex items-center justify-center"><!></div> <div class="text-muted-foreground text-center"><p class="text-foreground mb-2 text-2xl font-medium">No Operators found</p> <p class="mb-5 text-base">Get started by creating a new Operator</p> <!></div>',1),xt=n('<div class="flex h-96 items-center justify-center"><!></div>'),bt=n("<!> <!> <!> <!>",1),yt=n('<div class="mb-2 grid grid-cols-1 gap-4 xl:grid-cols-3"></div>'),Pt=n("<!> ",1),wt=n('<span class="text-muted-foreground text-xs"> </span>'),Ct=n('<div class="flex items-center justify-between"><h3 class="text-foreground -mt-6.5 truncate pr-8 text-2xl font-semibold"> </h3> <div class="absolute top-4 right-4"><!></div></div> <div class="mt-5 flex items-center gap-2 pt-3"><!> <!></div>',1),Ot=n('<a class="block"><!></a>'),zt=n('<div class="col-span-3 flex justify-center"><!></div>'),Bt=n('<div class="mb-2 grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3"></div> <!>',1),Mt=n('<!> <div class="mb-5 flex items-center justify-between"><h1 class="text-foreground text-3xl font-bold">Operators</h1> <!></div> <div class="mt-px space-y-4"><!></div>',1),kt=n("<main><!></main> <!>",1);function Zt(oe,J){Oe(J,!0);let p=I(!0),K=I(!1),M=I(!1),i=I(Be([])),Y=I(!1);const Z=3,_=60,T=new Se;let k;const F=de(()=>dt.params.namespace);Je(async()=>{e(F)&&we.setActiveId(e(F)),k=T.paginateOperators(_);try{await ee()}catch{f(K,!0)}}),Ke(()=>{if(e(i).length>0){const r=e(i).length%Z;r>0&&(k.size=_+Z-r)}});async function ee(){f(p,!0);try{const r=await k.fetchNext();f(i,[...e(i),...r],!0),f(Y,k.hasNext(),!0)}catch(r){Me(r)}finally{f(p,!1)}}function q(){f(M,!0)}var ne=kt();Xe("1i9nntq",r=>{Qe(()=>{Ue.title="Operators - Coro"})});var Q=a(ne),Ee=c(Q);{var Le=r=>{it(r)},Ne=r=>{var ue=Mt(),pe=a(ue);P(pe,()=>ot,(g,w)=>{w(g,{class:"mb-5",children:(S,A)=>{var D=B(),$=a(D);P($,()=>tt,(C,h)=>{h(C,{children:(H,N)=>{var d=B(),s=a(d);P(s,()=>at,(m,x)=>{x(m,{children:(O,b)=>{var u=B(),E=a(u);{let y=de(()=>`/namespaces/${e(F)}/operators`);P(E,()=>rt,(v,z)=>{z(v,{get href(){return e(y)},class:"flex items-center gap-2",children:(L,U)=>{var G=_t(),j=a(G);st(j,{class:"size-4"}),se(),t(L,G)},$$slots:{default:!0}})})}t(O,u)},$$slots:{default:!0}})}),t(H,d)},$$slots:{default:!0}})}),t(S,D)},$$slots:{default:!0}})});var le=l(pe,2),Ie=l(c(le),2);ve(Ie,{onclick:q,children:(g,w)=>{var S=gt(),A=a(S);Ce(A,{class:"size-4"}),se(),t(g,S)},$$slots:{default:!0}}),o(le);var _e=l(le,2),Te=c(_e);{var Fe=g=>{var w=xt(),S=c(w);P(S,()=>me,(A,D)=>{D(A,{class:"w-full max-w-2xl",children:($,C)=>{var h=B(),H=a(h);P(H,()=>fe,(N,d)=>{d(N,{class:"pt-6",children:(s,m)=>{var x=ht(),O=a(x),b=c(O);mt(b,{class:"text-muted-foreground size-12"}),o(O);var u=l(O,2),E=l(c(u),4);ve(E,{variant:"outline",onclick:q,children:(y,v)=>{var z=$t(),L=a(z);Ce(L,{class:"size-4"}),se(),t(y,z)},$$slots:{default:!0}}),o(u),t(s,x)},$$slots:{default:!0}})}),t($,h)},$$slots:{default:!0}})}),o(w),t(g,w)},qe=g=>{var w=B(),S=a(w);{var A=$=>{var C=yt();Pe(C,20,()=>({length:3}),Ve,(h,H)=>{var N=B(),d=a(N);P(d,()=>me,(s,m)=>{m(s,{children:(x,O)=>{var b=B(),u=a(b);P(u,()=>fe,(E,y)=>{y(E,{class:"space-y-4 pt-6",children:(v,z)=>{var L=bt(),U=a(L);re(U,{class:"h-6 w-32"});var G=l(U,2);re(G,{class:"h-4 w-full"});var j=l(G,2);re(j,{class:"h-4 w-3/4"});var V=l(j,2);re(V,{class:"h-6 w-24"}),t(v,L)},$$slots:{default:!0}})}),t(x,b)},$$slots:{default:!0}})}),t(h,N)}),o(C),t($,C)},D=$=>{var C=Bt(),h=a(C);Pe(h,21,()=>e(i),d=>d.id,(d,s)=>{var m=Ot(),x=c(m);P(x,()=>me,(O,b)=>{b(O,{class:"hover:bg-accent/50 relative transition-colors",children:(u,E)=>{var y=B(),v=a(y);P(v,()=>fe,(z,L)=>{L(z,{class:"pt-6",children:(U,G)=>{var j=Ct(),V=a(j),ie=c(V),Ae=c(ie,!0);o(ie);var ge=l(ie,2),De=c(ge);lt(De,{}),o(ge),o(V);var $e=l(V,2),he=c($e);{let W=de(()=>e(s).status.connected?"success":"destructive");et(he,{get variant(){return e(W)},class:"flex items-center gap-1",children:(X,xe)=>{var te=Pt(),be=a(te);nt(be,{class:"size-1.5! fill-current"});var Re=l(be);ae(()=>ce(Re,` NATS ${e(s).status.connected?"Connected":"Disconnected"}`)),t(X,te)},$$slots:{default:!0}})}var He=l(he,2);{var Ge=W=>{var X=wt(),xe=c(X,!0);o(X),ae(te=>ce(xe,te),[()=>Ye(e(s).status.connect_time)]),t(W,X)};R(He,W=>{e(s).status.connected&&e(s).status.connect_time&&W(Ge)})}o($e),ae(()=>ce(Ae,e(s).name)),t(U,j)},$$slots:{default:!0}})}),t(u,y)},$$slots:{default:!0}})}),o(m),ae(()=>Ze(m,"href",`/namespaces/${we.activeId}/operators/${e(s).id}`)),t(d,m)}),o(h);var H=l(h,2);{var N=d=>{var s=zt(),m=c(s);ve(m,{variant:"outline",size:"sm",onclick:ee,get disabled(){return e(p)},children:(x,O)=>{var b=B(),u=a(b);{var E=v=>{We(v,{class:"size-4 animate-spin"})},y=v=>{var z=ke("Load More");t(v,z)};R(u,v=>{e(p)?v(E):v(y,!1)})}t(x,b)},$$slots:{default:!0}}),o(s),t(d,s)};R(H,d=>{e(Y)&&d(N)})}t($,C)};R(S,$=>{e(p)&&!e(i).length?$(A):$(D,!1)},!0)}t(g,w)};R(Te,g=>{!e(p)&&!e(i).length?g(Fe):g(qe,!1)})}o(_e),t(r,ue)};R(Ee,r=>{e(K)?r(Le):r(Ne,!1)})}o(Q);var je=l(Q,2);pt(je,{get operators(){return e(i)},set operators(r){f(i,r,!0)},get open(){return e(M)},set open(r){f(M,r,!0)}}),t(oe,ne),ze()}export{Zt as component};
