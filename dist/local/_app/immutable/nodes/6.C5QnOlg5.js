import"../chunks/DsnmJJEf.js";import{o as Je}from"../chunks/BMX_zOea.js";import{p as Oe,a as ze,h as Be,c,b as f,g as t,d as L,s as l,n as se,r as o,l as Ke,f as a,u as be,t as ae}from"../chunks/BkBo4zcc.js";import{f as n,t as Me,a as e,c as B,s as de}from"../chunks/UR9opbve.js";import{p as ye,i as q}from"../chunks/BLQyWBbh.js";import{E as Qe,L as Ue,I as Ve,s as ke,e as Pe,i as We,b as Xe}from"../chunks/BmSp21oe.js";import{c as P}from"../chunks/UE325Gli.js";import{g as Ye,d as Ze}from"../chunks/CrH7mYYb.js";import{B as ce}from"../chunks/KJKHz_n6.js";import{C as ve,a as fe}from"../chunks/C79rA3AS.js";import{B as et}from"../chunks/CcFf8x0n.js";import{B as tt,a as at,b as rt,H as st,c as ot,S as re,C as nt}from"../chunks/CNHvmY6Q.js";import{M as lt}from"../chunks/1Dx3W_fg.js";import{E as it}from"../chunks/DjxZdDEO.js";import{n as we}from"../chunks/BBnCHKX8.js";import{C as Se}from"../chunks/BdUt5oNp.js";import{p as dt}from"../chunks/9FnanwCX.js";import{P as Ce}from"../chunks/Ctpg_XMM.js";import{F as ct}from"../chunks/D-VHaDj4.js";var vt=n('<div class="col-span-2"><!> <!></div>');function ft(oe,G){Oe(G,!0);let p=ye(G,"open",15,!1),R=ye(G,"operators",31,()=>Be([])),M=L(!1),i=L("");const Y=new Se;async function Z(_){_.preventDefault();try{f(M,!0);const T=await Y.createOperator(t(i));R([T,...R()]),f(i,""),p(!1)}catch(T){ke(T)}finally{f(M,!1)}}Qe(oe,{entityType:"operator",modalType:"create",onsubmit:Z,get open(){return p()},set open(_){p(_)},get loading(){return t(M)},set loading(_){f(M,_,!0)},children:(_,T)=>{var k=vt(),J=c(k);Ue(J,{for:"name",class:"mb-2",children:(F,ne)=>{se();var K=Me("Name");e(F,K)},$$slots:{default:!0}});var ee=l(J,2);Ve(ee,{name:"name",placeholder:"Type operator name",required:!0,get value(){return t(i)},set value(F){f(i,F,!0)}}),o(k),e(_,k)},$$slots:{default:!0}}),ze()}var mt=n("<!> Operators",1),ut=n("<!> Create Operator",1),pt=n("<!> Create Operator",1),_t=n('<div class="mb-3 flex items-center justify-center"><!></div> <div class="text-muted-foreground text-center"><p class="text-foreground mb-2 text-2xl font-medium">No Operators found</p> <p class="mb-5 text-base">Get started by creating a new Operator</p> <!></div>',1),gt=n('<div class="flex h-96 items-center justify-center"><!></div>'),$t=n("<!> <!> <!> <!>",1),ht=n('<div class="mb-2 grid grid-cols-1 gap-4 xl:grid-cols-3"></div>'),xt=n("<!> ",1),bt=n('<span class="text-muted-foreground text-xs"> </span>'),yt=n('<div class="flex items-center justify-between"><h3 class="text-foreground -mt-6.5 truncate pr-8 text-2xl font-semibold"> </h3> <div class="absolute top-4 right-4"><!></div></div> <div class="mt-5 flex items-center gap-2 pt-3"><!> <!></div>',1),Pt=n('<a class="block"><!></a>'),wt=n('<div class="col-span-3 flex justify-center"><!></div>'),Ct=n('<div class="mb-2 grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3"></div> <!>',1),Ot=n('<!> <div class="mb-5 flex items-center justify-between"><h1 class="text-foreground text-3xl font-bold">Operators</h1> <!></div> <div class="mt-px space-y-4"><!></div>',1),zt=n("<main><!></main> <!>",1);function Qt(oe,G){Oe(G,!0);let p=L(!0),R=L(!1),M=L(!1),i=L(Be([])),Y=L(!1);const Z=3,_=60,T=new Se;let k;const J=be(()=>dt.params.namespace);Je(async()=>{t(J)&&we.setActiveId(t(J)),k=T.paginateOperators(_);try{await ee()}catch{f(R,!0)}}),Ke(()=>{if(t(i).length>0){const r=t(i).length%Z;r>0&&(k.size=_+Z-r)}});async function ee(){f(p,!0);try{const r=await k.fetchNext();f(i,[...t(i),...r],!0),f(Y,k.hasNext(),!0)}catch(r){ke(r)}finally{f(p,!1)}}function F(){f(M,!0)}var ne=zt(),K=a(ne),Ee=c(K);{var Ne=r=>{it(r)},je=r=>{var me=Ot(),ue=a(me);P(ue,()=>ot,(g,w)=>{w(g,{class:"mb-5",children:(S,A)=>{var D=B(),$=a(D);P($,()=>tt,(C,h)=>{h(C,{children:(H,N)=>{var d=B(),s=a(d);P(s,()=>at,(m,x)=>{x(m,{children:(O,b)=>{var u=B(),E=a(u);P(E,()=>rt,(y,v)=>{v(y,{href:"/",class:"flex items-center gap-2",children:(z,j)=>{var I=mt(),Q=a(I);st(Q,{class:"size-4"}),se(),e(z,I)},$$slots:{default:!0}})}),e(O,u)},$$slots:{default:!0}})}),e(H,d)},$$slots:{default:!0}})}),e(S,D)},$$slots:{default:!0}})});var le=l(ue,2),Le=l(c(le),2);ce(Le,{onclick:F,children:(g,w)=>{var S=ut(),A=a(S);Ce(A,{class:"size-4"}),se(),e(g,S)},$$slots:{default:!0}}),o(le);var pe=l(le,2),Te=c(pe);{var Fe=g=>{var w=gt(),S=c(w);P(S,()=>fe,(A,D)=>{D(A,{class:"w-full max-w-2xl",children:($,C)=>{var h=B(),H=a(h);P(H,()=>ve,(N,d)=>{d(N,{class:"pt-6",children:(s,m)=>{var x=_t(),O=a(x),b=c(O);ct(b,{class:"text-muted-foreground size-12"}),o(O);var u=l(O,2),E=l(c(u),4);ce(E,{variant:"outline",onclick:F,children:(y,v)=>{var z=pt(),j=a(z);Ce(j,{class:"size-4"}),se(),e(y,z)},$$slots:{default:!0}}),o(u),e(s,x)},$$slots:{default:!0}})}),e($,h)},$$slots:{default:!0}})}),o(w),e(g,w)},Ae=g=>{var w=B(),S=a(w);{var A=$=>{var C=ht();Pe(C,20,()=>({length:3}),We,(h,H)=>{var N=B(),d=a(N);P(d,()=>fe,(s,m)=>{m(s,{children:(x,O)=>{var b=B(),u=a(b);P(u,()=>ve,(E,y)=>{y(E,{class:"space-y-4 pt-6",children:(v,z)=>{var j=$t(),I=a(j);re(I,{class:"h-6 w-32"});var Q=l(I,2);re(Q,{class:"h-4 w-full"});var U=l(Q,2);re(U,{class:"h-4 w-3/4"});var V=l(U,2);re(V,{class:"h-6 w-24"}),e(v,j)},$$slots:{default:!0}})}),e(x,b)},$$slots:{default:!0}})}),e(h,N)}),o(C),e($,C)},D=$=>{var C=Ct(),h=a(C);Pe(h,21,()=>t(i),d=>d.id,(d,s)=>{var m=Pt(),x=c(m);P(x,()=>fe,(O,b)=>{b(O,{class:"hover:bg-accent/50 relative transition-colors",children:(u,E)=>{var y=B(),v=a(y);P(v,()=>ve,(z,j)=>{j(z,{class:"pt-6",children:(I,Q)=>{var U=yt(),V=a(U),ie=c(V),De=c(ie,!0);o(ie);var _e=l(ie,2),He=c(_e);lt(He,{}),o(_e),o(V);var ge=l(V,2),$e=c(ge);{let W=be(()=>t(s).status.connected?"success":"destructive");et($e,{get variant(){return t(W)},class:"flex items-center gap-1",children:(X,he)=>{var te=xt(),xe=a(te);nt(xe,{class:"size-1.5! fill-current"});var Re=l(xe);ae(()=>de(Re,` NATS ${t(s).status.connected?"Connected":"Disconnected"}`)),e(X,te)},$$slots:{default:!0}})}var qe=l($e,2);{var Ge=W=>{var X=bt(),he=c(X,!0);o(X),ae(te=>de(he,te),[()=>Ye(t(s).status.connect_time)]),e(W,X)};q(qe,W=>{t(s).status.connected&&t(s).status.connect_time&&W(Ge)})}o(ge),ae(()=>de(De,t(s).name)),e(I,U)},$$slots:{default:!0}})}),e(u,y)},$$slots:{default:!0}})}),o(m),ae(()=>Ze(m,"href",`/namespaces/${we.activeId}/operators/${t(s).id}`)),e(d,m)}),o(h);var H=l(h,2);{var N=d=>{var s=wt(),m=c(s);ce(m,{variant:"outline",size:"sm",onclick:ee,get disabled(){return t(p)},children:(x,O)=>{var b=B(),u=a(b);{var E=v=>{Xe(v,{class:"size-4 animate-spin"})},y=v=>{var z=Me("Load More");e(v,z)};q(u,v=>{t(p)?v(E):v(y,!1)})}e(x,b)},$$slots:{default:!0}}),o(s),e(d,s)};q(H,d=>{t(Y)&&d(N)})}e($,C)};q(S,$=>{t(p)&&!t(i).length?$(A):$(D,!1)},!0)}e(g,w)};q(Te,g=>{!t(p)&&!t(i).length?g(Fe):g(Ae,!1)})}o(pe),e(r,me)};q(Ee,r=>{t(R)?r(Ne):r(je,!1)})}o(K);var Ie=l(K,2);ft(Ie,{get operators(){return t(i)},set operators(r){f(i,r,!0)},get open(){return t(M)},set open(r){f(M,r,!0)}}),e(oe,ne),ze()}export{Qt as component};
