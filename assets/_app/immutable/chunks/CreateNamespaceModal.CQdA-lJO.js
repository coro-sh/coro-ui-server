import{s as D,l as g,e as y,c as v,b as k,f as d,p as h,i as _,r as L,m as $,k as A,a as F,q as O,g as P}from"./scheduler.CbFSYGZU.js";import{S as R,i as V,b,c as C,a as w,m as N,t as E,d as I,f as S}from"./index._YEAsZDy.js";import{E as j,s as z,L as B,I as G}from"./toast.J7Fx0rWr.js";import{C as H}from"./coro-client.vR-dqdj0.js";import{a as T,n as J}from"./namespace.DYAXPB0R.js";import{g as K}from"./entry.y_fq7KGR.js";function Q(i){let a,e="Name",c,t,n,r;function u(s){i[4](s)}let m={name:"name",placeholder:"Type namespace name",required:!0};return i[2]!==void 0&&(m.value=i[2]),t=new G({props:m}),g.push(()=>b(t,"value",u)),{c(){a=y("span"),a.textContent=e,c=F(),C(t.$$.fragment)},l(s){a=v(s,"SPAN",{"data-svelte-h":!0}),O(a)!=="svelte-15ueaex"&&(a.textContent=e),c=P(s),w(t.$$.fragment,s)},m(s,p){_(s,a,p),_(s,c,p),N(t,s,p),r=!0},p(s,p){const o={};!n&&p&4&&(n=!0,o.value=s[2],$(()=>n=!1)),t.$set(o)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&(d(a),d(c)),S(t,s)}}}function U(i){let a,e,c;return e=new B({props:{class:"space-y-2",$$slots:{default:[Q]},$$scope:{ctx:i}}}),{c(){a=y("div"),C(e.$$.fragment),this.h()},l(t){a=v(t,"DIV",{class:!0});var n=k(a);w(e.$$.fragment,n),n.forEach(d),this.h()},h(){h(a,"class","col-span-2")},m(t,n){_(t,a,n),N(e,a,null),c=!0},p(t,n){const r={};n&516&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){c||(E(e.$$.fragment,t),c=!0)},o(t){I(e.$$.fragment,t),c=!1},d(t){t&&d(a),S(e)}}}function W(i){let a,e,c,t,n,r,u;function m(o){i[5](o)}function s(o){i[6](o)}let p={entityType:"namespace",modalType:"create",$$slots:{default:[U]},$$scope:{ctx:i}};return i[0]!==void 0&&(p.open=i[0]),i[1]!==void 0&&(p.loading=i[1]),e=new j({props:p}),g.push(()=>b(e,"open",m)),g.push(()=>b(e,"loading",s)),{c(){a=y("form"),C(e.$$.fragment),this.h()},l(o){a=v(o,"FORM",{class:!0,action:!0});var l=k(a);w(e.$$.fragment,l),l.forEach(d),this.h()},h(){h(a,"class","flex flex-col space-y-6"),h(a,"action","#")},m(o,l){_(o,a,l),N(e,a,null),n=!0,r||(u=L(a,"submit",i[3]),r=!0)},p(o,[l]){const f={};l&516&&(f.$$scope={dirty:l,ctx:o}),!c&&l&1&&(c=!0,f.open=o[0],$(()=>c=!1)),!t&&l&2&&(t=!0,f.loading=o[1],$(()=>t=!1)),e.$set(f)},i(o){n||(E(e.$$.fragment,o),n=!0)},o(o){I(e.$$.fragment,o),n=!1},d(o){o&&d(a),S(e),r=!1,u()}}}function X(i,a,e){let c;A(i,T,l=>e(7,c=l));let{open:t=!1}=a,n=!1,r="";const u=new H;async function m(l){l.preventDefault();try{e(1,n=!0);const f=await u.createNamespace(r),q=await u.paginateNamespaces(100).fetchNext();J.set(q),T.set(f.id),e(2,r=""),e(0,t=!1);const M=`/namespaces/${c}`;await K(M)}catch(f){z(f)}finally{e(1,n=!1)}}function s(l){r=l,e(2,r)}function p(l){t=l,e(0,t)}function o(l){n=l,e(1,n)}return i.$$set=l=>{"open"in l&&e(0,t=l.open)},[t,n,r,m,s,p,o]}class se extends R{constructor(a){super(),V(this,a,X,W,D,{open:0})}}export{se as C};
